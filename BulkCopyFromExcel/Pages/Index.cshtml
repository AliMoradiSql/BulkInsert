@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery.ui.widget.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-file-upload/4.0.11/jquery.uploadfile.min.js"></script>
@*<script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/jquery-ui-personalized-1.5.2.packed.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/sprinkle.js"></script>*@

<link href="https://cdnjs.cloudflare.com/ajax/libs/jquery-file-upload/4.0.11/uploadfile.min.css" rel="stylesheet" />
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<div class="card  pt-5">
    <div class="card-header">
        <p>Enter Your File</p>
    </div>
    <div class="card-body">
        <form name="InformationsForm" role="form" novalidate class="needs-validation">

            <div class="row">
                <div id="Info" class="col-md-12 mt-5 float-end">
                    <div class="form-group">
                        <label for="avatar">Choose a Excel File:</label>
                        <label class="btn btn-primary col-md-2">
                            <i class="fa fa-file"></i>
                            <span>Select / ChangeFile</span>
                            @*The file input field used as target for the file upload widget*@
                            <input id="fileupload" type="file" name="files" onchange="uploadFiles('fileupload');"
                                   accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                                   style="display:none">

                        </label>
                        <br>
                        <br>
                        <!-- The global progress bar -->
                        <!--<div id="progress" class="progress">
                            <div class="progress-bar progress-bar-success"></div>
                        </div>-->
                        <!-- The container for the uploaded files -->
                        <div id="files" class="files"></div>
                    </div>
                </div>

            </div>
        </form>
        <button id="BtnSubmit">SubmitBtn</button>
    </div>
</div>
<script>
    function uploadFiles(inputId) {
        var input = document.getElementById(inputId);
        var files = input.files;
        var formData = new FormData();

        for (var i = 0; i != files.length; i++) {
            formData.append("files", files[i]);
        }

        $.ajax(
            {
                url: "7108/Test",
                data: formData,
                processData: false,
                contentType: false,
                type: "POST",
                success: function (data) {
                    alert("Files Uploaded!");
                }
            }
        );
    }
</script>
<!--<script>
    $(document).ready(function () {
        $("#BtnSubmit").click(function () {


            var file = $("#fileupload").val();
            var getUrl = 'Home/Test';

            //var uploadurl = 'App/Files/Upload';
            //$('#fileupload').fileupload({
            //    url: uploadurl,
            //    dataType: 'json',
            //    maxFileSize: 999000,
            //    dropZone: $('#Info'),
            //    start: function (e) {
            //        abp.ui.setBusy();
            //    },
            //    done: function (e, response) {
            //        if (!response.result.success) {
            //            abp.message.error(response.result.message);
            //        }

            //        if (!response.result.result.succeed) {
            //            abp.message.error(response.result.result.message);
            //        } else {
            //            $('#Address').val(response.result.result.url);
            //            abp.notify.info(app.localize('UploadSuccessfully'));
            //        }
            //        abp.ui.clearBusy();
            //    },
            //    progressall: function (e, data) {
            //        var progress = parseInt(data.loaded / data.total * 100, 10);
            //        _$progressBar.css('width', progress + '%');
            //    }
            //}).prop('disabled', !$.support.fileInput).parent().addClass($.support.fileInput ? undefined : 'disabled');
            //console.log("Test");
        });
    });-->
@*</script>*@
